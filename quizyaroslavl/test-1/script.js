class Quiz {
    constructor() {
        this.questions = [
            {
                "question": "–ß–µ–º –æ—Ç–ª–∏—á–∞—é—Ç—Å—è –ø—Ä–∏—Ä–æ–¥–Ω—ã–µ –∑–æ–Ω—ã –Ø—Ä–æ—Å–ª–∞–≤—Å–∫–æ–π –æ–±–ª–∞—Å—Ç–∏ –æ—Ç —Å–æ—Å–µ–¥–Ω–∏—Ö —Ä–µ–≥–∏–æ–Ω–æ–≤? –ú–æ–∂–Ω–æ –ª–∏ —ç—Ç–æ –ø–æ–Ω—è—Ç—å –ø–æ —ç–∫—Å–ø–æ–Ω–∞—Ç–∞–º?",
                "image": "",
                "answers": [
                    {"text": "–ü—Ä–µ–æ–±–ª–∞–¥–∞–Ω–∏–µ —Å—Ç–µ–ø–Ω—ã—Ö –ª–∞–Ω–¥—à–∞—Ñ—Ç–æ–≤"},
                    {"text": "–ë–æ–ª—å—à–µ –±–æ–ª–æ—Ç –∏ –æ–∑–µ—Ä"},
                    {"text": "–ù–∞–ª–∏—á–∏–µ —Å—É–±—Ç—Ä–æ–ø–∏—á–µ—Å–∫–æ–π —Ä–∞—Å—Ç–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏"},
                    {"text": "–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –≤ –∑–æ–Ω–µ —Å–º–µ—à–∞–Ω–Ω—ã—Ö –ª–µ—Å–æ–≤"}
                ],
                "correctIndex": 3,
                "explanation": "–Ø—Ä–æ—Å–ª–∞–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∞ –≤ –∑–æ–Ω–µ —Å–º–µ—à–∞–Ω–Ω—ã—Ö –ª–µ—Å–æ–≤, —á—Ç–æ –æ—Ç–ª–∏—á–∞–µ—Ç –µ—ë –æ—Ç —Å–æ—Å–µ–¥–Ω–∏—Ö —Ä–µ–≥–∏–æ–Ω–æ–≤. –≠–∫—Å–ø–æ–Ω–∞—Ç—ã –º—É–∑–µ—è (–≥–µ—Ä–±–∞—Ä–∏–∏, –æ–±—Ä–∞–∑—Ü—ã –ø–æ—á–≤) –æ—Ç—Ä–∞–∂–∞—é—Ç —ç—Ç—É –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å."
            },
            {
                "question": "–ö–∞–∫ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å —Ñ–∞—É–Ω–∞ –∫—Ä–∞—è –∑–∞ 1000 –ª–µ—Ç? –ö–∞–∫–∏–µ —ç–∫—Å–ø–æ–Ω–∞—Ç—ã –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é—Ç —ç—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è?",
                "image": "https://cs12.pikabu.ru/post_img/2022/03/06/4/1646543211115955008.jpg",
                "answers": [
                    {"text": "–£–≤–µ–ª–∏—á–µ–Ω–∏–µ —á–∏—Å–ª–∞ —Ö–∏—â–Ω–∏–∫–æ–≤"},
                    {"text": "–ò—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏–µ –∫—Ä—É–ø–Ω—ã—Ö –º–ª–µ–∫–æ–ø–∏—Ç–∞—é—â–∏—Ö"},
                    {"text": "–ü–æ—è–≤–ª–µ–Ω–∏–µ —ç–∫–∑–æ—Ç–∏—á–µ—Å–∫–∏—Ö –≤–∏–¥–æ–≤"},
                    {"text": "–£–º–µ–Ω—å—à–µ–Ω–∏–µ —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏—è –ø—Ç–∏—Ü"}
                ],
                "correctIndex": 1,
                "explanation": "–ó–∞ 1000 –ª–µ—Ç –∏—Å—á–µ–∑–ª–∏ –º–∞–º–æ–Ω—Ç—ã, —à–µ—Ä—Å—Ç–∏—Å—Ç—ã–µ –Ω–æ—Å–æ—Ä–æ–≥–∏ –∏ –¥—Ä—É–≥–∏–µ –∫—Ä—É–ø–Ω—ã–µ –º–ª–µ–∫–æ–ø–∏—Ç–∞—é—â–∏–µ. –ö–æ—Å—Ç–∏ —ç—Ç–∏—Ö –∂–∏–≤–æ—Ç–Ω—ã—Ö, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ –≤ –º—É–∑–µ–µ, —Å–ª—É–∂–∞—Ç –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ–º."
            },
            {
                "question": "–°—Ç–æ—Ä–æ–∂ –Ω–æ—á–Ω–æ–π —É –∑–µ–ª–µ–Ω–æ–≥–æ –¥–æ–º–∞.<br> –ö–∞–∫ —Ç–æ–ª—å–∫–æ –Ω–∞ –ª–µ—Å –æ–ø—É—Å–∫–∞–µ—Ç—Å—è –¥—Ä–µ–º–∞,<br> –û–Ω, —É—Ö–∞—è –≥—É–ª–∫–æ, –Ω–∞ –≤–∞—Ö—Ç—É —Å–ø–µ—à–∏—Ç,<br> –ò —Å–º–æ—Ç—Ä–∏—Ç, –∏ —Å–ª—É—à–∞–µ—Ç: –ö—Ç–æ —Ç–∞–º —à—É—Ä—à–∏—Ç?",
                "image": "",
                "answers": [
                    {"text": "–°–æ–≤–∞"},
                    {"text": "–§–∏–ª–∏–Ω"},
                    {"text": "–°—ã—á"},
                    {"text": "–í–æ—Ä–æ–Ω"}
                ],
                "correctIndex": 1,
                "explanation": "–§–∏–ª–∏–Ω ‚Äî –Ω–æ—á–Ω–∞—è –ø—Ç–∏—Ü–∞, –µ–≥–æ —É—Ö–∞–Ω—å–µ –∏ –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Ç–æ—á–Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –æ–ø–∏—Å–∞–Ω–∏—é –≤ –∑–∞–≥–∞–¥–∫–µ."
            },
            {
                "question": "–ù–∞—á–Ω—É —Å —Ç–æ–≥–æ, —á—Ç–æ –∑–æ–≤—ë—Ç –Ω–∞—Å –≤ –±–æ—é,<br> –ü—Ä–æ–¥–æ–ª–∂—É —è –Ω–æ—Ç–æ–π, –ø–æ—é—â–µ–π –≤ —Å—Ç—Ä–æ—é.<br> –í –∫–æ–Ω—Ü–µ ‚Äî ¬´—Ü–µ¬ª, –∫–∞–∫ –ø—Ä—ã–∂–æ–∫ –Ω–∞ —Å—É–∫,<br> –Ø ‚Äî –ª–æ–≤–∫–∞—è —Ç–µ–Ω—å, –∏ –ª–µ—Å –º–æ–π –¥—Ä—É–≥.<br> –ü—É—à–∏—Å—Ç—ã–π –æ—Ö–æ—Ç–Ω–∏–∫, –≤ –¥—É–ø–ª–µ —è –∂–∏–≤—É,<br> –ê —à—É–±–∫—É –º–æ—é –±–µ—Ä–µ–≥—É—Ç –Ω–∞ –≤–µ–∫—É.",
                "image": "",
                "answers": [
                    {"text": "–ö—É–Ω–∏—Ü–∞"},
                    {"text": "–ë–µ–ª–∫–∞"},
                    {"text": "–õ–∏—Å–∞"},
                    {"text": "–ì–æ—Ä–Ω–æ—Å—Ç–∞–π"}
                ],
                "correctIndex": 0,
                "explanation": "–ó–∞–≥–∞–¥–∫–∞ —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ ¬´–∫—É–Ω–∏—Ü–∞¬ª: ¬´–∫—É¬ª (–∫–∞–∫ –∫–ª–∏—á), ¬´–º–∏¬ª (–Ω–æ—Ç–∞), ¬´—Ü–∞¬ª (–æ–∫–æ–Ω—á–∞–Ω–∏–µ). –ö—É–Ω–∏—Ü–∞ –∂–∏–≤—ë—Ç –≤ –¥—É–ø–ª–∞—Ö, –∞ –µ—ë –º–µ—Ö –≤—ã—Å–æ–∫–æ —Ü–µ–Ω–∏—Ç—Å—è."
            },
            {
                "question": "–ö—Ç–æ –≤ –ª–µ—Å—É –∑–∏–º–æ–π –æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø—è—Ç–∏–∫–æ–Ω–µ—á–Ω—ã–µ —Å–ª–µ–¥—ã, —Ö–æ—Ç—è —Å–∞–º –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —Ä–∏—Å—É–µ—Ç?",
                "image": "https://stihi.ru/pics/2017/01/30/10489.jpg",
                "answers": [
                    {"text": "–Å–∂"},
                    {"text": "–ó–∞—è—Ü"},
                    {"text": "–ë–µ–ª–∫–∞"},
                    {"text": "–õ–æ—Å—å"}
                ],
                "correctIndex": 0,
                "explanation": "–ó–∏–º–æ–π —ë–∂ –≤–ø–∞–¥–∞–µ—Ç –≤ —Å–ø—è—á–∫—É, –Ω–æ –µ–≥–æ —Å–ª–µ–¥—ã (–ø—è—Ç—å –ø–∞–ª—å—Ü–µ–≤) –º–æ–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å –¥–æ –Ω–∞—Å—Ç—É–ø–ª–µ–Ω–∏—è —Ö–æ–ª–æ–¥–æ–≤."
            },
            {
                "question": "–ü–æ—á–µ–º—É –≤—ã—Ö—É—Ö–æ–ª—å —Ä–µ–¥–∫–æ –≤—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è, –µ—Å–ª–∏ –æ–Ω–∞ –æ–±–∏—Ç–∞–µ—Ç –≤ —Ä–µ–∫–∞—Ö –Ø—Ä–æ—Å–ª–∞–≤—Å–∫–æ–π –æ–±–ª–∞—Å—Ç–∏?",
                "image": "https://optim.tildacdn.com/tild6134-3733-4363-a431-653232333162/-/resize/744x/-/format/webp/pic-01_1.jpg",
                "answers": [
                    {"text": "–ò–∑-–∑–∞ –∑–∞–≥—Ä—è–∑–Ω–µ–Ω–∏—è –≤–æ–¥—ã"},
                    {"text": "–í–µ–¥—ë—Ç —Å–∫—Ä—ã—Ç–Ω—ã–π –Ω–æ—á–Ω–æ–π –æ–±—Ä–∞–∑ –∂–∏–∑–Ω–∏"},
                    {"text": "–ú–∏–≥—Ä–∏—Ä—É–µ—Ç –≤ –¥—Ä—É–≥–∏–µ —Ä–µ–≥–∏–æ–Ω—ã"},
                    {"text": "–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫–æ—Ä–º–æ–≤–æ–π –±–∞–∑—ã"}
                ],
                "correctIndex": 1,
                "explanation": "–í—ã—Ö—É—Ö–æ–ª—å –∞–∫—Ç–∏–≤–Ω–∞ –Ω–æ—á—å—é, –æ–±–∏—Ç–∞–µ—Ç –≤ –∑–∞–±–æ–ª–æ—á–µ–Ω–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö –∏ –∫—Ä–∞–π–Ω–µ –æ—Å—Ç–æ—Ä–æ–∂–Ω–∞, –ø–æ—ç—Ç–æ–º—É –µ—ë —Å–ª–æ–∂–Ω–æ –≤—Å—Ç—Ä–µ—Ç–∏—Ç—å."
            }
        ];
        this.currentQuestionIndex = 0;
        this.score = 0;
        this.quizContainer = document.querySelector('.quiz-container');
        this.nextBtn = document.querySelector('.next-btn');
        this.progressElement = document.querySelector('.progress');

        this.nextBtn.addEventListener('click', () => this.nextQuestion());
        this.loadQuestion();
    }

    loadQuestion() {
        this.quizContainer.innerHTML = '';
        const question = this.questions[this.currentQuestionIndex];
        const questionElement = document.createElement('div');
        questionElement.className = 'question-container';
        questionElement.innerHTML = `
            <img src="${question.image}" class="question-image">
            <div class="question-text">${question.question}</div>
            <div class="answers-container">
                ${question.answers.map((answer, index) => `
                    <div class="answer" data-index="${index}">
                        <div class="answer-text">${answer.text}</div>
                        <div class="feedback"></div>
                    </div>
                `).join('')}
            </div>
        `;

        questionElement.querySelectorAll('.answer').forEach(answer => {
            answer.addEventListener('click', (e) => this.handleAnswerClick(e));
        });

        this.quizContainer.appendChild(questionElement);
        this.updateProgress();
    }

    handleAnswerClick(e) {
        if (document.querySelector('.selected')) return;

        const selectedAnswer = e.currentTarget;
        const correctIndex = this.questions[this.currentQuestionIndex].correctIndex;
        const isCorrect = parseInt(selectedAnswer.dataset.index) === correctIndex;
        const feedback = selectedAnswer.querySelector('.feedback');

        selectedAnswer.classList.add(isCorrect ? 'correct' : 'incorrect', 'selected');

        if (!isCorrect) {
            const correctAnswer = this.questions[this.currentQuestionIndex].answers[correctIndex].text;
            const correctAnswerExplanation = this.questions[this.currentQuestionIndex].explanation;
            feedback.textContent = `–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: ${correctAnswer}. ${correctAnswerExplanation}`;
        } else {
            this.score++;
            feedback.textContent = '–ü—Ä–∞–≤–∏–ª—å–Ω–æ! –û—Ç–ª–∏—á–Ω—ã–π –æ—Ç–≤–µ—Ç!';
        }

        this.nextBtn.style.display = 'block';
    }

    nextQuestion() {
        if (this.currentQuestionIndex < this.questions.length - 1) {
            this.currentQuestionIndex++;
            this.loadQuestion();
            this.nextBtn.style.display = 'none';
            this.nextBtn.textContent = this.currentQuestionIndex === this.questions.length - 1
                ? '–ó–∞–≤–µ—Ä—à–∏—Ç—å —Ç–µ—Å—Ç!'
                : '–ü–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –≤–æ–ø—Ä–æ—Å—É  ‚û°';
        } else {
            this.showResults();
        }
    }

    updateProgress() {
        this.progressElement.textContent = `–í–æ–ø—Ä–æ—Å ${this.currentQuestionIndex + 1}/${this.questions.length}`;
    }

    showResults() {
        this.quizContainer.innerHTML = `
            <div class="results-container">
                <h2>–¢–µ—Å—Ç –∑–∞–≤–µ—Ä—à–µ–Ω! üéâ</h2>
                <p>–í–∞—à —Ä–µ–∑—É–ª—å—Ç–∞—Ç: ${this.score}/${this.questions.length}</p>
                <p>${this.getFinalMessage()}</p>
                <a href='https://domaintest-byte.github.io/yarkremlin-quiz/quizyaroslavl/main/' style='color: black;'>–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É</a>
            </div>
        `;
        this.nextBtn.style.display = 'none';
    }

    getFinalMessage() {
        const percentage = (this.score / this.questions.length) * 100;
        if (percentage === 100) return '–ò–¥–µ–∞–ª—å–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç! –í—ã –Ω–∞—Å—Ç–æ—è—â–∏–π —ç–∫—Å–ø–µ—Ä—Ç!';
        if (percentage > 70) return '–•–æ—Ä–æ—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç! –ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ –≤ —Ç–æ–º –∂–µ –¥—É—Ö–µ!';
        return '–ï—Å—Ç—å –∫—É–¥–∞ —Å—Ç—Ä–µ–º–∏—Ç—å—Å—è! –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø—Ä–æ–π—Ç–∏ —Ç–µ—Å—Ç –µ—â–µ —Ä–∞–∑!';
    }
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ—Å—Ç–∞
document.addEventListener('DOMContentLoaded', () => new Quiz());

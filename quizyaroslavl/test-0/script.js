class Quiz {
    constructor() {
        this.questions = [
            {
                "question": "–°–∏—è–µ—Ç, –∫–∞–∫ —Å–æ–ª–Ω—Ü–µ, –∏–∑ —á–∏—Å—Ç–æ–≥–æ –∑–ª–∞—Ç–∞, –í —Ö—Ä–∞–º–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è, —Å–≤—è—Ç–∞ –∏ –±–æ–≥–∞—Ç–∞. –í –Ω–µ–π –ª–∞–¥–∞–Ω –∏ –º–∏—Ä–æ ‚Äî –¥–ª—è —Å–ª—É–∂–±—ã –ø—Ä–∏—á–∞—Å—Ç–Ω–æ–π, –í —Ä—É–∫–∞—Ö —É —Å–≤—è—â–µ–Ω–Ω–∏–∫–∞ ‚Äî —Å–∏–º–≤–æ–ª –ø—Ä–µ–∫—Ä–∞—Å–Ω—ã–π. –ß—Ç–æ —ç—Ç–æ?",
                "image": "./source/vopros (1).jpg",
                "answers": [
                    {"text": "–ö–∞–¥–∏–ª–æ"},
                    {"text": "–î–∞—Ä–æ—Ö—Ä–∞–Ω–∏—Ç–µ–ª—å–Ω–∏—Ü–∞"},
                    {"text": "–ü–∞–Ω–∞–≥–∏—è"},
                    {"text": "–ú–∏—Ç—Ä–∞"}
                ],
                "correctIndex": 1,
                "explanation": "–î–∞—Ä–æ—Ö—Ä–∞–Ω–∏—Ç–µ–ª—å–Ω–∏—Ü–∞ ‚Äî —Å–≤—è—â–µ–Ω–Ω—ã–π —Å–æ—Å—É–¥ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –°–≤—è—Ç—ã—Ö –î–∞—Ä–æ–≤, —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–æ –∏–∑–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º—ã–π –∏–∑ –¥—Ä–∞–≥–æ—Ü–µ–Ω–Ω—ã—Ö –º–µ—Ç–∞–ª–ª–æ–≤."
            },
            {
                "question": "–ö–∞–∫–æ–π –º–∞—Ç–µ—Ä–∏–∞–ª –ù–ï –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –≤ —Å–æ–∑–¥–∞–Ω–∏–∏ —ç–∫—Å–ø–æ–Ω–∞—Ç–æ–≤ –∏–∑ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ ¬´–°–æ–∫—Ä–æ–≤–∏—â–∞ –Ø—Ä–æ—Å–ª–∞–≤–ª—è¬ª?",
                "image": "./source/vopros (2).jpg",
                "answers": [
                    {"text": "–°–µ—Ä–µ–±—Ä–æ"},
                    {"text": "–≠–º–∞–ª—å"},
                    {"text": "–ü–ª–∞—Å—Ç–∏–∫"},
                    {"text": "–î—Ä–∞–≥–æ—Ü–µ–Ω–Ω—ã–µ –∫–∞–º–Ω–∏"}
                ],
                "correctIndex": 2,
                "explanation": "–í –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã: –¥—Ä–∞–≥–æ—Ü–µ–Ω–Ω—ã–µ –º–µ—Ç–∞–ª–ª—ã, —ç–º–∞–ª—å –∏ –∫–∞–º–Ω–∏. –ü–ª–∞—Å—Ç–∏–∫ –Ω–µ –ø—Ä–∏–º–µ–Ω—è–ª—Å—è."
            },
            {
                "question": "üíç + üëë + ‚õ™Ô∏è = ? (–ß—Ç–æ –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç —ç—Ç–∏ –ø—Ä–µ–¥–º–µ—Ç—ã –≤ —ç–∫—Å–ø–æ–∑–∏—Ü–∏–∏?)",
                "image": "",
                "answers": [
                    {"text": "–¶–∞—Ä—Å–∫–∏–µ —Ä–µ–≥–∞–ª–∏–∏"},
                    {"text": "–¶–µ—Ä–∫–æ–≤–Ω–∞—è —É—Ç–≤–∞—Ä—å"},
                    {"text": "–Æ–≤–µ–ª–∏—Ä–Ω—ã–µ —É–∫—Ä–∞—à–µ–Ω–∏—è"},
                    {"text": "–ê—Ä—Ö–µ–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –Ω–∞—Ö–æ–¥–∫–∏"}
                ],
                "correctIndex": 1,
                "explanation": "–ü—Ä–µ–¥–º–µ—Ç—ã —Å–∏–º–≤–æ–ª–∏–∑–∏—Ä—É—é—Ç —Ü–µ—Ä–∫–æ–≤–Ω—É—é —É—Ç–≤–∞—Ä—å: –∫–æ–ª—å—Ü–æ (üíç) ‚Äî –µ–ø–∏—Å–∫–æ–ø—Å–∫–æ–µ –∫–æ–ª—å—Ü–æ, –∫–æ—Ä–æ–Ω–∞ (üëë) ‚Äî –≤–µ–Ω–µ—Ü –Ω–∞ –∏–∫–æ–Ω—É, —Ö—Ä–∞–º (‚õ™Ô∏è) ‚Äî –±–æ–≥–æ—Å–ª—É–∂–µ–±–Ω—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã."
            },
            {
                "question": "–¢–µ—Ö–Ω–∏–∫–∞ —É–∫—Ä–∞—à–µ–Ω–∏—è —é–≤–µ–ª–∏—Ä–Ω—ã—Ö –∏–∑–¥–µ–ª–∏–π —Ü–≤–µ—Ç–Ω—ã–º–∏ —Å—Ç–µ–∫–ª–æ–≤–∏–¥–Ω—ã–º–∏ –≤—Å—Ç–∞–≤–∫–∞–º–∏ (5 –±—É–∫–≤)",
                "image": "./source/vopros (4).jpg",
                "answers": [
                    {"text": "–ß–µ–∫–∞–Ω–∫–∞"},
                    {"text": "–§–∏–Ω–∏—Ñ—Ç—å"},
                    {"text": "–≠–º–∞–ª—å"},
                    {"text": "–°–∫–∞–Ω—å"}
                ],
                "correctIndex": 2,
                "explanation": "–≠–º–∞–ª—å ‚Äî —Ç–µ—Ö–Ω–∏–∫–∞ –Ω–∞–Ω–µ—Å–µ–Ω–∏—è —Ü–≤–µ—Ç–Ω—ã—Ö —Å—Ç–µ–∫–ª–æ–≤–∏–¥–Ω—ã—Ö –º–∞—Å—Å –Ω–∞ –º–µ—Ç–∞–ª–ª–∏—á–µ—Å–∫—É—é –æ—Å–Ω–æ–≤—É, —à–∏—Ä–æ–∫–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω–∞—è –≤ —è—Ä–æ—Å–ª–∞–≤—Å–∫–æ–π –∫–æ–ª–ª–µ–∫—Ü–∏–∏."
            },
            {
                "question": "–¶–µ–Ω–Ω–æ–µ –≤–µ—â–µ—Å—Ç–≤–æ, –∏–∑ –∫–æ—Ç–æ—Ä–æ–≥–æ –∏–∑–≥–æ—Ç–æ–≤–ª–µ–Ω—ã –æ–∫–ª–∞–¥—ã –∏–∫–æ–Ω (7 –±—É–∫–≤)",
                "image": "",
                "answers": [
                    {"text": "–ü–ª–∞—Ç–∏–Ω–∞"},
                    {"text": "–°–µ—Ä–µ–±—Ä–æ"},
                    {"text": "–õ–∞—Ç—É–Ω—å"},
                    {"text": "–ë—Ä–æ–Ω–∑–∞"}
                ],
                "correctIndex": 1,
                "explanation": "–ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –æ–∫–ª–∞–¥–æ–≤ –∏–∫–æ–Ω –≤ —ç–∫—Å–ø–æ–∑–∏—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã –∏–∑ —Å–µ—Ä–µ–±—Ä–∞ ‚Äî —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–æ–≥–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞ –¥–ª—è —Ü–µ—Ä–∫–æ–≤–Ω–æ–≥–æ –∏—Å–∫—É—Å—Å—Ç–≤–∞."
            },
            {
                "question": "–í —ç–∫—Å–ø–æ–∑–∏—Ü–∏–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã –∏–∫–æ–Ω—ã XVII‚ÄìXVIII –≤–µ–∫–æ–≤",
                "image": "",
                "answers": [
                    {"text": "–í–µ—Ä–Ω–æ"},
                    {"text": "–ù–µ–≤–µ—Ä–Ω–æ"}
                ],
                "correctIndex": 0,
                "explanation": "–ö–æ–ª–ª–µ–∫—Ü–∏—è –≤–∫–ª—é—á–∞–µ—Ç –∏–∫–æ–Ω—ã XVII‚ÄìXVIII –≤–µ–∫–æ–≤ ‚Äî –ø–µ—Ä–∏–æ–¥ —Ä–∞—Å—Ü–≤–µ—Ç–∞ —è—Ä–æ—Å–ª–∞–≤—Å–∫–æ–π –∏–∫–æ–Ω–æ–ø–∏—Å–Ω–æ–π —à–∫–æ–ª—ã."
            },
            {
                "question": "–í—Å–µ –ø—Ä–µ–¥–º–µ—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω—ã –≤ —Ç–µ—Ö–Ω–∏–∫–µ —Ñ—Ä–µ—Å–∫–∏",
                "image": "",
                "answers": [
                    {"text": "–í–µ—Ä–Ω–æ"},
                    {"text": "–ù–µ–≤–µ—Ä–Ω–æ"}
                ],
                "correctIndex": 1,
                "explanation": "–§—Ä–µ—Å–∫–∞ ‚Äî —Ç–µ—Ö–Ω–∏–∫–∞ –Ω–∞—Å—Ç–µ–Ω–Ω–æ–π –∂–∏–≤–æ–ø–∏—Å–∏, –≤ —Ç–æ –≤—Ä–µ–º—è –∫–∞–∫ –≤ —ç–∫—Å–ø–æ–∑–∏—Ü–∏–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –º–µ—Ç–∞–ª–ª–∏—á–µ—Å–∫–∏–µ –∏–∑–¥–µ–ª–∏—è –∏ –∏–∫–æ–Ω—ã –Ω–∞ –¥–µ—Ä–µ–≤–µ."
            },
            {
                "question": "–°—Ä–µ–¥–∏ —ç–∫—Å–ø–æ–Ω–∞—Ç–æ–≤ –µ—Å—Ç—å –∫—Ä–µ—Å—Ç—ã, –æ–∫–ª–∞–¥—ã, –¥–∞—Ä–æ–Ω–æ—Å–∏—Ü—ã",
                "image": "",
                "answers": [
                    {"text": "–í–µ—Ä–Ω–æ"},
                    {"text": "–ù–µ–≤–µ—Ä–Ω–æ"}
                ],
                "correctIndex": 0,
                "explanation": "–≠–∫—Å–ø–æ–∑–∏—Ü–∏—è –≤–∫–ª—é—á–∞–µ—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ –≤–∏–¥—ã —Ü–µ—Ä–∫–æ–≤–Ω–æ–π —É—Ç–≤–∞—Ä–∏: –Ω–∞–ø—Ä–µ—Å—Ç–æ–ª—å–Ω—ã–µ –∫—Ä–µ—Å—Ç—ã, –æ–∫–ª–∞–¥—ã –∏–∫–æ–Ω, –¥–∞—Ä–æ—Ö—Ä–∞–Ω–∏—Ç–µ–ª—å–Ω–∏—Ü—ã –∏ –¥–∞—Ä–æ–Ω–æ—Å–∏—Ü—ã."
            },
            {
                "question": "–£–∫—Ä–∞—à–µ–Ω–∏—è –≤ —ç–∫—Å–ø–æ–∑–∏—Ü–∏–∏ –∏–∑–≥–æ—Ç–æ–≤–ª–µ–Ω—ã –Ω–∞ –£—Ä–∞–ª–µ",
                "image": "",
                "answers": [
                    {"text": "–í–µ—Ä–Ω–æ"},
                    {"text": "–ù–µ–≤–µ—Ä–Ω–æ"}
                ],
                "correctIndex": 1,
                "explanation": "–ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ —Å–æ–∑–¥–∞–Ω—ã –≤ —è—Ä–æ—Å–ª–∞–≤—Å–∫–∏—Ö –∏ –º–æ—Å–∫–æ–≤—Å–∫–∏—Ö –º–∞—Å—Ç–µ—Ä—Å–∫–∏—Ö, –∞ –Ω–µ –Ω–∞ –£—Ä–∞–ª–µ."
            }
        ];
        this.currentQuestionIndex = 0;
        this.score = 0;
        this.quizContainer = document.querySelector('.quiz-container');
        this.nextBtn = document.querySelector('.next-btn');
        this.progressElement = document.querySelector('.progress');

        this.nextBtn.addEventListener('click', () => this.nextQuestion());
        this.loadQuestion();
    }

    loadQuestion() {
        this.quizContainer.innerHTML = '';
        const question = this.questions[this.currentQuestionIndex];
        const questionElement = document.createElement('div');
        questionElement.className = 'question-container';
        questionElement.innerHTML = `
            <img src="${question.image}" class="question-image">
            <div class="question-text">${question.question}</div>
            <div class="answers-container">
                ${question.answers.map((answer, index) => `
                    <div class="answer" data-index="${index}">
                        <div class="answer-text">${answer.text}</div>
                        <div class="feedback"></div>
                    </div>
                `).join('')}
            </div>
        `;

        questionElement.querySelectorAll('.answer').forEach(answer => {
            answer.addEventListener('click', (e) => this.handleAnswerClick(e));
        });

        this.quizContainer.appendChild(questionElement);
        this.updateProgress();
    }

    handleAnswerClick(e) {
        if (document.querySelector('.selected')) return;

        const selectedAnswer = e.currentTarget;
        const correctIndex = this.questions[this.currentQuestionIndex].correctIndex;
        const isCorrect = parseInt(selectedAnswer.dataset.index) === correctIndex;
        const feedback = selectedAnswer.querySelector('.feedback');

        selectedAnswer.classList.add(isCorrect ? 'correct' : 'incorrect', 'selected');

        if (!isCorrect) {
            const correctAnswer = this.questions[this.currentQuestionIndex].answers[correctIndex].text;
            const correctAnswerExplanation = this.questions[this.currentQuestionIndex].explanation;
            feedback.textContent = `–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: ${correctAnswer}. ${correctAnswerExplanation}`;
        } else {
            this.score++;
            feedback.textContent = '–ü—Ä–∞–≤–∏–ª—å–Ω–æ! –û—Ç–ª–∏—á–Ω—ã–π –æ—Ç–≤–µ—Ç!';
        }

        this.nextBtn.style.display = 'block';
    }

    nextQuestion() {
        if (this.currentQuestionIndex < this.questions.length - 1) {
            this.currentQuestionIndex++;
            this.loadQuestion();
            this.nextBtn.style.display = 'none';
            this.nextBtn.textContent = this.currentQuestionIndex === this.questions.length - 1
                ? '–ó–∞–≤–µ—Ä—à–∏—Ç—å —Ç–µ—Å—Ç!'
                : '–ü–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –≤–æ–ø—Ä–æ—Å—É  ‚û°';
        } else {
            this.showResults();
        }
    }

    updateProgress() {
        this.progressElement.textContent = `–í–æ–ø—Ä–æ—Å ${this.currentQuestionIndex + 1}/${this.questions.length}`;
    }

    showResults() {
        this.quizContainer.innerHTML = `
            <div class="results-container">
                <h2>–¢–µ—Å—Ç –∑–∞–≤–µ—Ä—à–µ–Ω! üéâ</h2>
                <p>–í–∞—à —Ä–µ–∑—É–ª—å—Ç–∞—Ç: ${this.score}/${this.questions.length}</p>
                <p>${this.getFinalMessage()}</p>
                <a href='https://domaintest-byte.github.io/yarkremlin-quiz/quizyaroslavl/main/' style='color: black;'>–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É</a>
            </div>
        `;
        this.nextBtn.style.display = 'none';
    }

    getFinalMessage() {
        const percentage = (this.score / this.questions.length) * 100;
        if (percentage === 100) return '–ò–¥–µ–∞–ª—å–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç! –í—ã –Ω–∞—Å—Ç–æ—è—â–∏–π —ç–∫—Å–ø–µ—Ä—Ç!';
        if (percentage > 70) return '–•–æ—Ä–æ—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç! –ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ –≤ —Ç–æ–º –∂–µ –¥—É—Ö–µ!';
        return '–ï—Å—Ç—å –∫—É–¥–∞ —Å—Ç—Ä–µ–º–∏—Ç—å—Å—è! –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø—Ä–æ–π—Ç–∏ —Ç–µ—Å—Ç –µ—â–µ —Ä–∞–∑!';
    }
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ—Å—Ç–∞
document.addEventListener('DOMContentLoaded', () => new Quiz());
